!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).AccessibleColorPicker={},e.vue)}(this,(function(e,t){"use strict";function o(e,t,o){return Math.max(t,Math.min(e,o))}function r(e,t=2){return e.toFixed(t).replace(/0+$/,"").replace(/\.$/,"")}const a={fromHueAngle(e){if(e.endsWith("."))return NaN;return(parseFloat(e)%360+360)%360/360},toHueAngle:e=>r(360*e),fromPercentage(e){if(!e.endsWith("%"))return NaN;const t=e.substring(0,e.length-1);if(t.endsWith("."))return NaN;const r=parseFloat(t);return Number.isNaN(r)?NaN:o(r,0,100)/100},toPercentage:e=>r(100*e)+"%",from8BitDecimal(e){if(e.endsWith("%"))return a.fromPercentage(e);if(e.endsWith("."))return NaN;const t=parseFloat(e);return Number.isNaN(t)?NaN:o(t,0,255)/255},to8BitDecimal:e=>r(255*e),fromAlpha:e=>e.endsWith("%")?a.fromPercentage(e):o(parseFloat(e),0,1),toAlpha:e=>String(e)},l={hsl:{h:{to:a.toHueAngle,from:a.fromHueAngle},s:{to:a.toPercentage,from:a.fromPercentage},l:{to:a.toPercentage,from:a.fromPercentage},a:{to:a.toAlpha,from:a.fromAlpha}},hwb:{h:{to:a.toHueAngle,from:a.fromHueAngle},w:{to:a.toPercentage,from:a.fromPercentage},b:{to:a.toPercentage,from:a.fromPercentage},a:{to:a.toAlpha,from:a.fromAlpha}},rgb:{r:{to:a.to8BitDecimal,from:a.from8BitDecimal},g:{to:a.to8BitDecimal,from:a.from8BitDecimal},b:{to:a.to8BitDecimal,from:a.from8BitDecimal},a:{to:a.toAlpha,from:a.fromAlpha}}};function n(e){const t=e.replace(/^#/,""),o=[],r=t.length>4?2:1;for(let e=0;e<t.length;e+=r){const a=t.slice(e,e+r);o.push(a.repeat(r%2+1))}3===o.length&&o.push("ff");const a=o.map((e=>parseInt(e,16)/255));return{r:a[0],g:a[1],b:a[2],a:a[3]}}function s(e){const t=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,o=2*e.l-t;return{r:c(o,t,e.h+1/3),g:c(o,t,e.h),b:c(o,t,e.h-1/3),a:e.a}}function c(e,t,o){return o<0?o+=1:o>1&&(o-=1),o<1/6?e+6*(t-e)*o:o<.5?t:o<2/3?e+(t-e)*(2/3-o)*6:e}function i(e){return{r:u(5,e),g:u(3,e),b:u(1,e),a:e.a}}function u(e,t){const o=(e+6*t.h)%6;return t.v-t.v*t.s*Math.max(0,Math.min(o,4-o,1))}function p(e){return{h:e.h,s:1===e.b?0:1-e.w/(1-e.b),v:1-e.b,a:e.a}}function h(e){const t=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b);let r;r=o===t?0:o===e.r?(0+(e.g-e.b)/(o-t))/6:o===e.g?(2+(e.b-e.r)/(o-t))/6:(4+(e.r-e.g)/(o-t))/6,r<0&&(r+=1);const a=(o+t)/2;let l;return l=0===o||1===t?0:(o-a)/Math.min(a,1-a),{h:r,s:l,l:a,a:e.a}}function d(e){const t=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b);let r,a;r=o===t?0:o===e.r?(0+(e.g-e.b)/(o-t))/6:o===e.g?(2+(e.b-e.r)/(o-t))/6:(4+(e.r-e.g)/(o-t))/6,r<0&&(r+=1),a=0===o?0:(o-t)/o;return{h:r,s:a,v:o,a:e.a}}function v(e){return"#"+Object.values(e).map((e=>{const t=255*e,o=Math.round(t).toString(16);return 1===o.length?"0"+o:o})).join("")}function b(e){const t=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b);let r;return r=o===t?0:o===e.r?(0+(e.g-e.b)/(o-t))/6:o===e.g?(2+(e.b-e.r)/(o-t))/6:(4+(e.r-e.g)/(o-t))/6,r<0&&(r+=1),{h:r,w:t,b:1-o,a:e.a}}const m={hex:{hsl:function(e){return h(n(e))},hsv:function(e){return d(n(e))},hwb:function(e){return b(n(e))},rgb:n},hsl:{hex:function(e){return v(s(e))},hsv:function(e){const t=e.l+e.s*Math.min(e.l,1-e.l),o=0===t?0:2-2*e.l/t;return{h:e.h,s:o,v:t,a:e.a}},hwb:function(e){return b(s(e))},rgb:s},hsv:{hex:function(e){return v(i(e))},hsl:function(e){const t=e.v-e.v*e.s/2,o=Math.min(t,1-t),r=0===o?0:(e.v-t)/o;return{h:e.h,s:r,l:t,a:e.a}},hwb:function(e){return{h:e.h,w:(1-e.s)*e.v,b:1-e.v,a:e.a}},rgb:i},hwb:{hex:function(e){return v(f(e))},hsl:function(e){return h(f(e))},hsv:p,rgb:f},rgb:{hex:v,hsl:h,hsv:d,hwb:b}};function f(e){return i(p(e))}function g(e,t,o){return m[t][o](e)}const V={hex:e=>e,hsl:e=>`hsl(${r(360*e.h)} ${r(100*e.s)}% ${r(100*e.l)}% / ${r(e.a)})`,hwb:e=>`hwb(${r(360*e.h)} ${r(100*e.w)}% ${r(100*e.b)}% / ${r(e.a)})`,rgb:e=>`rgb(${r(255*e.r)} ${r(255*e.g)} ${r(255*e.b)} / ${r(e.a)})`};function C(e,t){return V[t](e)}function y(e){return!!e.startsWith("#")&&(!![3,4,6,8].includes(e.length-1)&&/^#[0-9A-Fa-f]+$/.test(e))}const N=["hex","hsl","hwb","rgb"];var w={name:"ColorPicker",props:{color:{type:[String,Object],required:!1,default:null},id:{type:String,required:!1,default:"color-picker"},visibleFormats:{type:Array,required:!1,default:()=>N,validator:e=>e.length>0&&e.every((e=>N.includes(e)))}},emits:["color-change"],data:()=>({pointerOriginatedInColorSpace:!1,activeFormat:"rgb",colors:{hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}}),watch:{color(e){this.setColorValueFromProp(e)}},created(){this.supportedFormats=["hex","hsl","hsv","hwb","rgb"]},mounted(){this.initThumbPointerNavigation(),this.setColorValueFromProp(this.color)},beforeUnmount(){document.removeEventListener("mousemove",this.moveThumbWithMouse),document.removeEventListener("touchmove",this.moveThumbWithTouch),document.removeEventListener("mouseup",this.stopMovingThumb),document.removeEventListener("touchend",this.stopMovingThumb)},methods:{initThumbPointerNavigation(){document.addEventListener("mousemove",this.moveThumbWithMouse,{passive:!1}),document.addEventListener("touchmove",this.moveThumbWithTouch,{passive:!1}),document.addEventListener("mouseup",this.stopMovingThumb),document.addEventListener("touchend",this.stopMovingThumb)},startMovingThumb(){this.pointerOriginatedInColorSpace=!0},stopMovingThumb(){this.pointerOriginatedInColorSpace=!1},moveThumbWithMouse(e){1===e.buttons&&!1!==this.pointerOriginatedInColorSpace&&this.moveThumb(e.clientX,e.clientY)},moveThumbWithTouch(e){!1!==this.pointerOriginatedInColorSpace&&(e.preventDefault(),this.moveThumb(e.touches[0].clientX,e.touches[0].clientY))},moveThumb(e,t){const r=this.$refs.colorSpace.getBoundingClientRect(),a=e-r.left,l=t-r.top,n={...this.colors.hsv};n.s=o(a/r.width,0,1),n.v=o(1-l/r.height,0,1),this.setColorValue(n,"hsv")},moveThumbWithArrows(e){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(e.key))return;e.preventDefault();const t=["ArrowLeft","ArrowDown"].includes(e.key)?-1:1,r=["ArrowLeft","ArrowRight"].includes(e.key)?"s":"v",a=e.shiftKey?10:1,l=this.colors.hsv[r]+t*a*.01;this.setColorValue(o(l,0,1),"hsv",r)},changeInputValue(e){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(e.key)||!e.shiftKey)return;const t=e.currentTarget,r=parseFloat(t.step),a=["ArrowLeft","ArrowDown"].includes(e.key)?-1:1,l=o(parseFloat(t.value)+a*r*10,parseInt(t.min),parseInt(t.max));t.value=String(l-a*r)},setColorValue(e,t,o){if(void 0!==o||function(e,t){if("string"==typeof e||"string"==typeof t)return e===t;for(const o in e)if(e[o]!==t[o])return!1;return!0}(e,this.colors[t])){if(void 0===o||this.colors[t][o]===e)return;this.colors[t][o]=e}else this.colors[t]=e;const r=this.applyColorUpdates(t);this.$emit("color-change",r)},applyColorUpdates(e){return this.colors=this.reCalculateColors(this.colors,e),this.setCssProps(this.$refs.colorPicker,this.$refs.colorSpace,this.$refs.thumb,this.colors),this.getEventData(this.colors,this.activeFormat)},setColorValueFromProp(e){if(null===e)return;let t,o;if("string"==typeof e)if(y(e))t=e,o="hex";else{const r=function(e){const t=document.createElement("span");if(t.style.display="none",t.style.color=e,""===t.style.color)return"";document.body.appendChild(t);const o=getComputedStyle(t).color;return t.remove(),o}(e);if(""===r)return;t=function(e){const t=e.substring(e.indexOf("(")+1,e.indexOf(")")).replace(/[,/]/g," ").replace(/\s+/g," ").split(" ");return{r:a.from8BitDecimal(t[0]),g:a.from8BitDecimal(t[1]),b:a.from8BitDecimal(t[2]),a:4===t.length?a.fromAlpha(t[3]):1}}(r),o="rgb"}else t=e,r=e,o=Object.prototype.hasOwnProperty.call(r,"r")?"rgb":Object.prototype.hasOwnProperty.call(r,"w")?"hwb":Object.prototype.hasOwnProperty.call(r,"v")?"hsv":"hsl";var r;this.setColorValue(t,o)},reCalculateColors(e,t){const o=e[t],r=this.supportedFormats.filter((e=>e!==t)),a={...e};for(const e of r){const r=g(o,t,e);a[e]=r}return a},copyColor(){!function(e){if("function"!=typeof document.queryCommandSupported||!document.queryCommandSupported("copy"))return!1;const t=document.createElement("textarea");let o;t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{o=document.execCommand("copy")}catch{o=!1}finally{document.body.removeChild(t)}}(C(this.colors[this.activeFormat],this.activeFormat))},updateHue(e){const t=e.currentTarget;this.setColorValue(parseInt(t.value)/360,"hsv","h")},updateAlpha(e){const t=e.currentTarget;this.setColorValue(parseInt(t.value)/100,"hsv","a")},updateColorValue(e,t,o){let r;const a=e.target;if("hex"===t){if(!y(a.value))return;r=a.value}else{r={...this.colors[t]};const e=l[t][o].from(a.value);if(Number.isNaN(e)||void 0===e)return;r[o]=e}this.setColorValue(r,t)},switchFormat(){const e=this.visibleFormats.findIndex((e=>e===this.activeFormat)),t=e===this.visibleFormats.length-1?0:e+1;this.activeFormat=this.visibleFormats[t]},getChannelAsCssValue(e,t){return l[e][t].to(this.colors[e][t])},getEventData:(e,t)=>({colors:{...e},cssColor:C(e[t],t)}),setCssProps(e,t,o,r){e.style.setProperty("--vacp-hsl-h",String(r.hsl.h)),e.style.setProperty("--vacp-hsl-s",String(r.hsl.s)),e.style.setProperty("--vacp-hsl-l",String(r.hsl.l)),e.style.setProperty("--vacp-hsl-a",String(r.hsl.a)),t.setAttribute("style","\n        position: relative;\n        background-color: hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%); /* 1. */\n        background-image:\n          linear-gradient(to top, #000, transparent),  /* 2. */\n          linear-gradient(to right, #fff, transparent) /* 2. */\n        ;\n      "),o.setAttribute("style",`\n        box-sizing: border-box;\n        position: absolute;\n        left: ${100*r.hsv.s}%;   /* 3. */\n        bottom: ${100*r.hsv.v}%; /* 3. */\n      `)}}};const x={ref:"colorPicker",class:"vacp-color-picker"},A={class:"vacp-range-input-label-text vacp-range-input-label-text--hue"},$=t.createTextVNode("Hue"),T={class:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},P=t.createTextVNode("Alpha"),k=t.createTextVNode(" Copy color "),F={class:"vacp-color-inputs"},I={key:0,class:"vacp-color-input-group"},M=t.createVNode("span",{class:"vacp-color-input-label-text"},"H",-1),B=t.createVNode("span",{class:"vacp-color-input-label-text"},"S",-1),S=t.createVNode("span",{class:"vacp-color-input-label-text"},"L",-1),D=t.createVNode("span",{class:"vacp-color-input-label-text"},"A",-1),W={key:1,class:"vacp-color-input-group"},O=t.createVNode("span",{class:"vacp-color-input-label-text"},"H",-1),L=t.createVNode("span",{class:"vacp-color-input-label-text"},"W",-1),H=t.createVNode("span",{class:"vacp-color-input-label-text"},"B",-1),E=t.createVNode("span",{class:"vacp-color-input-label-text"},"A",-1),j={key:2,class:"vacp-color-input-group"},q=t.createVNode("span",{class:"vacp-color-input-label-text"},"R",-1),K=t.createVNode("span",{class:"vacp-color-input-label-text"},"G",-1),R=t.createVNode("span",{class:"vacp-color-input-label-text"},"B",-1),U=t.createVNode("span",{class:"vacp-color-input-label-text"},"A",-1),X={key:3,class:"vacp-color-input-group"},Y=t.createVNode("span",{class:"vacp-color-input-label-text"},"Hex",-1),_=t.createTextVNode(" Switch format ");w.render=function(e,o,r,a,l,n){return t.openBlock(),t.createBlock("div",x,[t.createVNode("div",{ref:"colorSpace",class:"vacp-color-space",onMousedown:o[2]||(o[2]=(...e)=>n.startMovingThumb&&n.startMovingThumb(...e)),onTouchstart:o[3]||(o[3]=(...e)=>n.startMovingThumb&&n.startMovingThumb(...e))},[t.createVNode("div",{ref:"thumb",class:"vacp-color-space-thumb",tabindex:"0","aria-label":"Color space thumb",onKeydown:o[1]||(o[1]=(...e)=>n.moveThumbWithArrows&&n.moveThumbWithArrows(...e))},null,544)],544),t.createVNode("label",{class:"vacp-range-input-label vacp-range-input-label--hue",for:`${r.id}-hue-slider`},[t.createVNode("span",A,[t.renderSlot(e.$slots,"hue-range-input-label",{},(()=>[$]))]),t.createVNode("input",{id:`${r.id}-hue-slider`,class:"vacp-range-input vacp-range-input--hue",value:360*l.colors.hsv.h,type:"range",min:"0",max:"360",step:"1",onKeydownPassive:o[4]||(o[4]=(...e)=>n.changeInputValue&&n.changeInputValue(...e)),onInput:o[5]||(o[5]=(...e)=>n.updateHue&&n.updateHue(...e))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-range-input-label vacp-range-input-label--alpha",for:`${r.id}-alpha-slider`},[t.createVNode("span",T,[t.renderSlot(e.$slots,"alpha-range-input-label",{},(()=>[P]))]),t.createVNode("input",{id:`${r.id}-alpha-slider`,class:"vacp-range-input vacp-range-input--alpha",value:100*l.colors.hsv.a,type:"range",min:"0",max:"100",step:"1",onKeydownPassive:o[6]||(o[6]=(...e)=>n.changeInputValue&&n.changeInputValue(...e)),onInput:o[7]||(o[7]=(...e)=>n.updateAlpha&&n.updateAlpha(...e))},null,40,["id","value"])],8,["for"]),t.createVNode("button",{class:"vacp-copy-button",type:"button",onClick:o[8]||(o[8]=(...e)=>n.copyColor&&n.copyColor(...e))},[t.renderSlot(e.$slots,"copy-button",{},(()=>[k]))]),t.createVNode("div",F,["hsl"===l.activeFormat?(t.openBlock(),t.createBlock("div",I,[t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hsl-h`},[M,t.createVNode("input",{id:`${r.id}-color-hsl-h`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hsl","h"),onInput:o[9]||(o[9]=e=>n.updateColorValue(e,"hsl","h"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hsl-s`},[B,t.createVNode("input",{id:`${r.id}-color-hsl-s`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hsl","s"),onInput:o[10]||(o[10]=e=>n.updateColorValue(e,"hsl","s"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hsl-l`},[S,t.createVNode("input",{id:`${r.id}-color-hsl-l`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hsl","l"),onInput:o[11]||(o[11]=e=>n.updateColorValue(e,"hsl","l"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hsl-a`},[D,t.createVNode("input",{id:`${r.id}-color-hsl-a`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hsl","a"),onInput:o[12]||(o[12]=e=>n.updateColorValue(e,"hsl","a"))},null,40,["id","value"])],8,["for"])])):"hwb"===l.activeFormat?(t.openBlock(),t.createBlock("div",W,[t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hwb-h`},[O,t.createVNode("input",{id:`${r.id}-color-hwb-h`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hwb","h"),onInput:o[13]||(o[13]=e=>n.updateColorValue(e,"hwb","h"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hwb-w`},[L,t.createVNode("input",{id:`${r.id}-color-hwb-w`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hwb","w"),onInput:o[14]||(o[14]=e=>n.updateColorValue(e,"hwb","w"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hwb-b`},[H,t.createVNode("input",{id:`${r.id}-color-hwb-b`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hwb","b"),onInput:o[15]||(o[15]=e=>n.updateColorValue(e,"hwb","b"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hwb-a`},[E,t.createVNode("input",{id:`${r.id}-color-hwb-a`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("hwb","a"),onInput:o[16]||(o[16]=e=>n.updateColorValue(e,"hwb","a"))},null,40,["id","value"])],8,["for"])])):"rgb"===l.activeFormat?(t.openBlock(),t.createBlock("div",j,[t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-rgb-r`},[q,t.createVNode("input",{id:`${r.id}-color-rgb-r`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("rgb","r"),onInput:o[17]||(o[17]=e=>n.updateColorValue(e,"rgb","r"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-rgb-g`},[K,t.createVNode("input",{id:`${r.id}-color-rgb-g`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("rgb","g"),onInput:o[18]||(o[18]=e=>n.updateColorValue(e,"rgb","g"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-rgb-b`},[R,t.createVNode("input",{id:`${r.id}-color-rgb-b`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("rgb","b"),onInput:o[19]||(o[19]=e=>n.updateColorValue(e,"rgb","b"))},null,40,["id","value"])],8,["for"]),t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-rgb-a`},[U,t.createVNode("input",{id:`${r.id}-color-rgb-a`,class:"vacp-color-input",type:"text",value:n.getChannelAsCssValue("rgb","a"),onInput:o[20]||(o[20]=e=>n.updateColorValue(e,"rgb","a"))},null,40,["id","value"])],8,["for"])])):"hex"===l.activeFormat?(t.openBlock(),t.createBlock("div",X,[t.createVNode("label",{class:"vacp-color-input-label",for:`${r.id}-color-hex`},[Y,t.createVNode("input",{id:`${r.id}-color-hex`,class:"vacp-color-input",type:"text",value:l.colors.hex,onInput:o[21]||(o[21]=e=>n.updateColorValue(e,"hex"))},null,40,["id","value"])],8,["for"])])):t.createCommentVNode("",!0),r.visibleFormats.length>1?(t.openBlock(),t.createBlock("button",{key:4,class:"vacp-format-switch-button",type:"button",onClick:o[22]||(o[22]=(...e)=>n.switchFormat&&n.switchFormat(...e))},[t.renderSlot(e.$slots,"format-switch-button",{},(()=>[_]))])):t.createCommentVNode("",!0)])],512)};var z={install(e){e.component("ColorPicker",w)}};e.ColorPicker=w,e.default=z,Object.defineProperty(e,"__esModule",{value:!0})}));
