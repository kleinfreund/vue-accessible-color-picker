!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).AccessibleColorPicker={})}(this,(function(t){"use strict";function e(t,e,o){return Math.max(e,Math.min(t,o))}function o(t,e=2){return t.toFixed(e).replace(/0+$/,"").replace(/\.$/,"")}const r={fromHueAngle(t){if(t.endsWith("."))return NaN;return(parseFloat(t)%360+360)%360/360},toHueAngle:t=>o(360*t),fromPercentage(t){if(!t.endsWith("%"))return NaN;const o=t.substring(0,t.length-1);if(o.endsWith("."))return NaN;const r=parseFloat(o);return Number.isNaN(r)?NaN:e(r,0,100)/100},toPercentage:t=>o(100*t)+"%",from8BitDecimal(t){if(t.endsWith("%"))return r.fromPercentage(t);if(t.endsWith("."))return NaN;const o=parseFloat(t);return Number.isNaN(o)?NaN:e(o,0,255)/255},to8BitDecimal:t=>o(255*t),fromAlpha:t=>t.endsWith("%")?r.fromPercentage(t):e(parseFloat(t),0,1),toAlpha:t=>String(t)},a={hsl:{h:{to:r.toHueAngle,from:r.fromHueAngle},s:{to:r.toPercentage,from:r.fromPercentage},l:{to:r.toPercentage,from:r.fromPercentage},a:{to:r.toAlpha,from:r.fromAlpha}},hwb:{h:{to:r.toHueAngle,from:r.fromHueAngle},w:{to:r.toPercentage,from:r.fromPercentage},b:{to:r.toPercentage,from:r.fromPercentage},a:{to:r.toAlpha,from:r.fromAlpha}},rgb:{r:{to:r.to8BitDecimal,from:r.from8BitDecimal},g:{to:r.to8BitDecimal,from:r.from8BitDecimal},b:{to:r.to8BitDecimal,from:r.from8BitDecimal},a:{to:r.toAlpha,from:r.fromAlpha}}};function n(t){const e=t.replace(/^#/,""),o=[],r=e.length>4?2:1;for(let t=0;t<e.length;t+=r){const a=e.slice(t,t+r);o.push(a.repeat(r%2+1))}3===o.length&&o.push("ff");const a=o.map(t=>parseInt(t,16)/255);return{r:a[0],g:a[1],b:a[2],a:a[3]}}function s(t){const e=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,o=2*t.l-e;return{r:l(o,e,t.h+1/3),g:l(o,e,t.h),b:l(o,e,t.h-1/3),a:t.a}}function l(t,e,o){return o<0?o+=1:o>1&&(o-=1),o<1/6?t+6*(e-t)*o:o<.5?e:o<2/3?t+(e-t)*(2/3-o)*6:t}function i(t){return{r:c(5,t),g:c(3,t),b:c(1,t),a:t.a}}function c(t,e){const o=(t+6*e.h)%6;return e.v-e.v*e.s*Math.max(0,Math.min(o,4-o,1))}function u(t){return{h:t.h,s:1===t.b?0:1-t.w/(1-t.b),v:1-t.b,a:t.a}}function p(t){const e=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b);let r;r=o===e?0:o===t.r?(0+(t.g-t.b)/(o-e))/6:o===t.g?(2+(t.b-t.r)/(o-e))/6:(4+(t.r-t.g)/(o-e))/6,r<0&&(r+=1);const a=(o+e)/2;let n;return n=0===o||1===e?0:(o-a)/Math.min(a,1-a),{h:r,s:n,l:a,a:t.a}}function h(t){const e=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b);let r,a;r=o===e?0:o===t.r?(0+(t.g-t.b)/(o-e))/6:o===t.g?(2+(t.b-t.r)/(o-e))/6:(4+(t.r-t.g)/(o-e))/6,r<0&&(r+=1),a=0===o?0:(o-e)/o;return{h:r,s:a,v:o,a:t.a}}function v(t){return"#"+Object.values(t).map(t=>{const e=255*t,o=Math.round(e).toString(16);return 1===o.length?"0"+o:o}).join("")}function d(t){const e=Math.min(t.r,t.g,t.b),o=Math.max(t.r,t.g,t.b);let r;return r=o===e?0:o===t.r?(0+(t.g-t.b)/(o-e))/6:o===t.g?(2+(t.b-t.r)/(o-e))/6:(4+(t.r-t.g)/(o-e))/6,r<0&&(r+=1),{h:r,w:e,b:1-o,a:t.a}}const b={hex:{hsl:function(t){return p(n(t))},hsv:function(t){return h(n(t))},hwb:function(t){return d(n(t))},rgb:n},hsl:{hex:function(t){return v(s(t))},hsv:function(t){const e=t.l+t.s*Math.min(t.l,1-t.l),o=0===e?0:2-2*t.l/e;return{h:t.h,s:o,v:e,a:t.a}},hwb:function(t){return d(s(t))},rgb:s},hsv:{hex:function(t){return v(i(t))},hsl:function(t){const e=t.v-t.v*t.s/2,o=Math.min(e,1-e),r=0===o?0:(t.v-e)/o;return{h:t.h,s:r,l:e,a:t.a}},hwb:function(t){return{h:t.h,w:(1-t.s)*t.v,b:1-t.v,a:t.a}},rgb:i},hwb:{hex:function(t){return v(f(t))},hsl:function(t){return p(f(t))},hsv:u,rgb:f},rgb:{hex:v,hsl:p,hsv:h,hwb:d}};function f(t){return i(u(t))}function m(t,e,o){return b[e][o](t)}const g={hex:t=>t,hsl:t=>`hsl(${o(360*t.h)} ${o(100*t.s)}% ${o(100*t.l)}% / ${o(t.a)})`,hwb:t=>`hwb(${o(360*t.h)} ${o(100*t.w)}% ${o(100*t.b)}% / ${o(t.a)})`,rgb:t=>`rgb(${o(255*t.r)} ${o(255*t.g)} ${o(255*t.b)} / ${o(t.a)})`};function C(t,e){return g[e](t)}function y(t){return!!t.startsWith("#")&&(!![3,4,6,8].includes(t.length-1)&&/^#[0-9A-Fa-f]+$/.test(t))}const w=["hex","hsl","hwb","rgb"];function _(t,e,o,r,a,n,s,l,i,c){"boolean"!=typeof s&&(i=l,l=s,s=!1);const u="function"==typeof o?o.options:o;let p;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),r&&(u._scopeId=r),n?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,i(t)),t&&t._registeredComponents&&t._registeredComponents.add(n)},u._ssrRegister=p):e&&(p=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,l(t))}),p)if(u.functional){const t=u.render;u.render=function(e,o){return p.call(o),t(e,o)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,p):[p]}return o}const x=_({render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vacp-color-picker"},[o("div",{ref:"colorSpace",staticClass:"vacp-color-space",on:{mousedown:t.startMovingThumb,touchstart:t.startMovingThumb}},[o("div",{ref:"thumb",staticClass:"vacp-color-space-thumb",attrs:{tabindex:"0","aria-label":"Color space thumb"},on:{keydown:t.moveThumbWithArrows}})]),t._v(" "),o("label",{staticClass:"vacp-range-input-label vacp-range-input-label--hue",attrs:{for:t.id+"-hue-slider"}},[o("span",{staticClass:"vacp-range-input-label-text vacp-range-input-label-text--hue"},[t._t("hue-range-input-label",[t._v("Hue")])],2),t._v(" "),o("input",{staticClass:"vacp-range-input vacp-range-input--hue",attrs:{id:t.id+"-hue-slider",type:"range",min:"0",max:"360",step:"1"},domProps:{value:360*t.colors.hsv.h},on:{"&keydown":function(e){return t.changeInputValue(e)},input:t.updateHue}})]),t._v(" "),o("label",{staticClass:"vacp-range-input-label vacp-range-input-label--alpha",attrs:{for:t.id+"-alpha-slider"}},[o("span",{staticClass:"vacp-range-input-label-text vacp-range-input-label-text--alpha"},[t._t("alpha-range-input-label",[t._v("Alpha")])],2),t._v(" "),o("input",{staticClass:"vacp-range-input vacp-range-input--alpha",attrs:{id:t.id+"-alpha-slider",type:"range",min:"0",max:"100",step:"1"},domProps:{value:100*t.colors.hsv.a},on:{"&keydown":function(e){return t.changeInputValue(e)},input:t.updateAlpha}})]),t._v(" "),o("button",{staticClass:"vacp-copy-button",attrs:{type:"button"},on:{click:t.copyColor}},[t._t("copy-button",[t._v("\n      Copy color\n    ")])],2),t._v(" "),o("div",{staticClass:"vacp-color-inputs"},["hsl"===t.activeFormat?o("div",{staticClass:"vacp-color-input-group"},[o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hsl-h"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("H")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hsl-h",type:"text"},domProps:{value:t.getChannelAsCssValue("hsl","h")},on:{input:function(e){return t.updateColorValue(e,"hsl","h")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hsl-s"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("S")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hsl-s",type:"text"},domProps:{value:t.getChannelAsCssValue("hsl","s")},on:{input:function(e){return t.updateColorValue(e,"hsl","s")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hsl-l"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("L")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hsl-l",type:"text"},domProps:{value:t.getChannelAsCssValue("hsl","l")},on:{input:function(e){return t.updateColorValue(e,"hsl","l")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hsl-a"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("A")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hsl-a",type:"text"},domProps:{value:t.getChannelAsCssValue("hsl","a")},on:{input:function(e){return t.updateColorValue(e,"hsl","a")}}})])]):"hwb"===t.activeFormat?o("div",{staticClass:"vacp-color-input-group"},[o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hwb-h"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("H")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hwb-h",type:"text"},domProps:{value:t.getChannelAsCssValue("hwb","h")},on:{input:function(e){return t.updateColorValue(e,"hwb","h")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hwb-w"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("W")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hwb-w",type:"text"},domProps:{value:t.getChannelAsCssValue("hwb","w")},on:{input:function(e){return t.updateColorValue(e,"hwb","w")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hwb-b"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("B")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hwb-b",type:"text"},domProps:{value:t.getChannelAsCssValue("hwb","b")},on:{input:function(e){return t.updateColorValue(e,"hwb","b")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hwb-a"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("A")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hwb-a",type:"text"},domProps:{value:t.getChannelAsCssValue("hwb","a")},on:{input:function(e){return t.updateColorValue(e,"hwb","a")}}})])]):"rgb"===t.activeFormat?o("div",{staticClass:"vacp-color-input-group"},[o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-rgb-r"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("R")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-rgb-r",type:"text"},domProps:{value:t.getChannelAsCssValue("rgb","r")},on:{input:function(e){return t.updateColorValue(e,"rgb","r")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-rgb-g"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("G")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-rgb-g",type:"text"},domProps:{value:t.getChannelAsCssValue("rgb","g")},on:{input:function(e){return t.updateColorValue(e,"rgb","g")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-rgb-b"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("B")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-rgb-b",type:"text"},domProps:{value:t.getChannelAsCssValue("rgb","b")},on:{input:function(e){return t.updateColorValue(e,"rgb","b")}}})]),t._v(" "),o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-rgb-a"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("A")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-rgb-a",type:"text"},domProps:{value:t.getChannelAsCssValue("rgb","a")},on:{input:function(e){return t.updateColorValue(e,"rgb","a")}}})])]):"hex"===t.activeFormat?o("div",{staticClass:"vacp-color-input-group"},[o("label",{staticClass:"vacp-color-input-label",attrs:{for:t.id+"-color-hex"}},[o("span",{staticClass:"vacp-color-input-label-text"},[t._v("Hex")]),t._v(" "),o("input",{staticClass:"vacp-color-input",attrs:{id:t.id+"-color-hex",type:"text"},domProps:{value:t.colors.hex},on:{input:function(e){return t.updateColorValue(e,"hex")}}})])]):t._e(),t._v(" "),t.visibleFormats.length>1?o("button",{staticClass:"vacp-format-switch-button",attrs:{type:"button"},on:{click:t.switchFormat}},[t._t("format-switch-button",[t._v("\n        Switch format\n      ")])],2):t._e()])])},staticRenderFns:[]},undefined,{name:"ColorPicker",props:{color:{type:[String,Object],required:!1,default:null},id:{type:String,required:!1,default:"color-picker"},visibleFormats:{type:Array,required:!1,default:()=>w,validator:t=>t.length>0&&t.every(t=>w.includes(t))}},data:()=>({pointerOriginatedInColorSpace:!1,activeFormat:"rgb",colors:{hex:"#ffffffff",hsl:{h:0,s:0,l:1,a:1},hsv:{h:0,s:0,v:1,a:1},hwb:{h:0,w:1,b:0,a:1},rgb:{r:1,g:1,b:1,a:1}}}),watch:{color(t){this.setColorValueFromProp(t)}},created(){this.supportedFormats=["hex","hsl","hsv","hwb","rgb"]},mounted(){this.initThumbPointerNavigation(),this.setColorValueFromProp(this.color)},beforeDestroy(){document.removeEventListener("mousemove",this.moveThumbWithMouse),document.removeEventListener("touchmove",this.moveThumbWithTouch),document.removeEventListener("mouseup",this.stopMovingThumb),document.removeEventListener("touchend",this.stopMovingThumb)},methods:{initThumbPointerNavigation(){document.addEventListener("mousemove",this.moveThumbWithMouse,{passive:!1}),document.addEventListener("touchmove",this.moveThumbWithTouch,{passive:!1}),document.addEventListener("mouseup",this.stopMovingThumb),document.addEventListener("touchend",this.stopMovingThumb)},startMovingThumb(){this.pointerOriginatedInColorSpace=!0},stopMovingThumb(){this.pointerOriginatedInColorSpace=!1},moveThumbWithMouse(t){1===t.buttons&&!1!==this.pointerOriginatedInColorSpace&&this.moveThumb(t.clientX,t.clientY)},moveThumbWithTouch(t){!1!==this.pointerOriginatedInColorSpace&&(t.preventDefault(),this.moveThumb(t.touches[0].clientX,t.touches[0].clientY))},moveThumb(t,o){const r=this.$refs.colorSpace.getBoundingClientRect(),a=t-r.left,n=o-r.top,s={...this.colors.hsv};s.s=e(a/r.width,0,1),s.v=e(1-n/r.height,0,1),this.setColorValue(s,"hsv")},moveThumbWithArrows(t){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key))return;t.preventDefault();const o=["ArrowLeft","ArrowDown"].includes(t.key)?-1:1,r=["ArrowLeft","ArrowRight"].includes(t.key)?"s":"v",a=t.shiftKey?10:1,n=this.colors.hsv[r]+o*a*.01;this.setColorValue(e(n,0,1),"hsv",r)},changeInputValue(t){if(!["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)||!t.shiftKey)return;const o=t.currentTarget,r=parseFloat(o.step),a=["ArrowLeft","ArrowDown"].includes(t.key)?-1:1,n=e(parseFloat(o.value)+a*r*10,parseInt(o.min),parseInt(o.max));o.value=String(n-a*r)},setColorValue(t,e,o){if(void 0!==o||function(t,e){if("string"==typeof t||"string"==typeof e)return t===e;for(const o in t)if(t[o]!==e[o])return!1;return!0}(t,this.colors[e])){if(void 0===o||this.colors[e][o]===t)return;this.colors[e][o]=t}else this.colors[e]=t;this.reCalculateColors(e),this.setCssProps(this.$el,this.colors);const r=this.getEventData(this.colors,this.activeFormat);this.$emit("color-change",r)},setColorValueFromProp(t){if(null===t)return;let e,o;if("string"==typeof t)if(y(t))e=t,o="hex";else{const a=function(t){const e=document.createElement("span");if(e.style.display="none",e.style.color=t,""===e.style.color)return"";document.body.appendChild(e);const o=getComputedStyle(e).color;return e.remove(),o}(t);if(""===a)return;e=function(t){const e=t.substring(t.indexOf("(")+1,t.indexOf(")")).replace(/[,/]/g," ").replace(/\s+/g," ").split(" ");return{r:r.from8BitDecimal(e[0]),g:r.from8BitDecimal(e[1]),b:r.from8BitDecimal(e[2]),a:4===e.length?r.fromAlpha(e[3]):1}}(a),o="rgb"}else e=t,a=t,o=Object.prototype.hasOwnProperty.call(a,"r")?"rgb":Object.prototype.hasOwnProperty.call(a,"w")?"hwb":Object.prototype.hasOwnProperty.call(a,"v")?"hsv":"hsl";var a;this.setColorValue(e,o)},reCalculateColors(t){const e=this.colors[t],o=this.supportedFormats.filter(e=>e!==t),r={...this.colors};for(const a of o){const o=m(e,t,a);r[a]=o}this.colors=r},copyColor(){!function(t){if("function"!=typeof document.queryCommandSupported||!document.queryCommandSupported("copy"))return!1;const e=document.createElement("textarea");let o;e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{o=document.execCommand("copy")}catch{o=!1}finally{document.body.removeChild(e)}}(C(this.colors[this.activeFormat],this.activeFormat))},updateHue(t){const e=t.currentTarget;this.setColorValue(parseInt(e.value)/360,"hsv","h")},updateAlpha(t){const e=t.currentTarget;this.setColorValue(parseInt(e.value)/100,"hsv","a")},updateColorValue(t,e,o){let r;const n=t.target;if("hex"===e){if(!y(n.value))return;r=n.value}else{r={...this.colors[e]};const t=a[e][o].from(n.value);if(Number.isNaN(t)||void 0===t)return;r[o]=t}this.setColorValue(r,e)},switchFormat(){const t=this.visibleFormats.findIndex(t=>t===this.activeFormat),e=t===this.visibleFormats.length-1?0:t+1;this.activeFormat=this.visibleFormats[e]},getChannelAsCssValue(t,e){const o=this.colors[t][e];return a[t][e].to(o)},getEventData:(t,e)=>({colors:{...t},cssColor:C(t[e],e)}),setCssProps(t,e){t.style.setProperty("--vacp-hsl-h",String(e.hsl.h)),t.style.setProperty("--vacp-hsl-s",String(e.hsl.s)),t.style.setProperty("--vacp-hsl-l",String(e.hsl.l)),t.style.setProperty("--vacp-hsl-a",String(e.hsl.a)),this.$refs.colorSpace.style="\n        position: relative;\n        background-color: hsl(calc(var(--vacp-hsl-h) * 360) 100% 50%); /* 1. */\n        background-image:\n          linear-gradient(to top, #000, transparent),  /* 2. */\n          linear-gradient(to right, #fff, transparent) /* 2. */\n        ;\n      ",this.$refs.thumb.style=`\n        box-sizing: border-box;\n        position: absolute;\n        left: ${100*e.hsv.s}%;   /* 3. */\n        bottom: ${100*e.hsv.v}%; /* 3. */\n      `}}},undefined,false,undefined,!1,void 0,void 0,void 0);function A(t){A.installed||(A.installed=!0,t.component("ColorPicker",x))}const V={install:A};"undefined"!=typeof window&&window.Vue&&"function"==typeof window.Vue.use?window.Vue.use(V):"undefined"!=typeof global&&global.Vue&&"function"==typeof global.Vue.use&&global.Vue.use(V),t.ColorPicker=x,t.default=V,t.install=A,Object.defineProperty(t,"__esModule",{value:!0})}));
